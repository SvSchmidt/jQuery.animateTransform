(function(e){e.fx.step["transform"]=function(t){$elem=e(t.elem);if(!t.css3TransformInit){t.startTime=e.now();vendorPrefix=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}((Array.prototype.slice.call(window.getComputedStyle(document.documentElement,"")).join("").match(/-(moz|webkit|ms)-/)||styles.OLink===""&&["","o"])[1]),objTransform=e.extend({},("    "+($elem[0].style.WebkitTransform||$elem[0].style.MozTransform||$elem[0].style.OTransform||$elem[0].style.MSTransform||$elem[0].style.Transform||" ").replace(new RegExp("\\, ","g"),",")).split(" "),"rotate(0deg) scale(1) translate(0px,0px) skew(0deg,0deg)".replace(new RegExp("\\, ","g"),",").split(" "));for(v in objTransform)if(objTransform[v])objTransform[objTransform[v].match(/([a-zA-Z]{0,10})/)[0].replace("3d","")]=objTransform[v].match(/[^()\s]+(?=,|\))/g)[0].replace(new RegExp("deg","g"),"").replace(new RegExp("px","g"),"").split(",")||[0,0,0];t.start={scale:+objTransform.scale[0],rotate:+objTransform.rotate[0],skewX:+objTransform.skew[0],skewY:+objTransform.skew[1],x:+objTransform.translate[0],y:+objTransform.translate[1],z:+objTransform.translate[2]||0};t.css3TransformInit=true}divisor=(Math.round((e.now()-t.startTime)/100)*100/t.options.duration).toFixed(3);rotateLine="rotate("+ +(t.start.rotate+(t.end.rotate-t.start.rotate)*divisor)+"deg)";scaleLine="scale("+ +(t.start.scale+(t.end.scale-t.start.scale)*divisor)+")";translateLine="translate"+(Math.abs(t.end.z)>0?"3d":"")+"("+(+(t.start.x+(t.end.x-t.start.x)*divisor)||t.start.x)+"px,"+(+(t.start.y+(t.end.y-t.start.y)*divisor)||t.start.y)+"px"+(Math.abs(t.end.z)>0?","+(t.start.z+(t.end.z-t.start.z)*divisor||t.start.z)+"px":"")+")";skewLine="skew("+(+(t.start.skewX+(t.end.skewX-t.start.skewX)*divisor)||t.start.skewX)+"deg,"+(+(t.start.skewY+(t.end.skewY-t.start.skewY)*divisor)||t.start.skewY)+"deg)";console.log(scaleLine);$elem.css(vendorPrefix+"Transform",(translateLine||"translate"+(t.start.z>0?"3d":"")+(t.start.x+"px,"+t.start.y+"px"+(t.start.z>0?t.start.z+",px":"")+")"))+(t.end.scale!=t.start.scale?scaleLine:"scale("+t.start.scale+")")+(t.start.rotate!=t.end.rotate?rotateLine:"rotate("+t.start.rotate+"deg)")+(skewLine||"skew("+t.start.skewX+"deg,"+t.start.skewY+"deg)"))}})(jQuery)