(function(e){e.fn.animateTransform=function(t){var n=e.extend({},e.fn.animateTransform.defaultSettings,t||{}),r=(Array.prototype.slice.call(window.getComputedStyle(document.documentElement,"")).join("").match(/-(moz|webkit|ms)-/)||styles.OLink===""&&["","o"])[0];return this.each(function(){var n=e(this),i=e.extend({},e.fn.animateTransform.defaultSettings,t||{}),s=0,o=0,u=0,a=0,f=0,l=0,c=0,h,p,d,m,g=0,y=e.extend({},("    "+(n[0].style.WebkitTransform||n[0].style.MozTransform||n[0].style.OTransform||n[0].style.MSTransform||n[0].style.Transform||" ").replace(new RegExp("\\, ","g"),",")).split(" "),"rotate(0deg) scale(1) translate(0px,0px) skew(0deg,0deg)".replace(new RegExp("\\, ","g"),",").split(" "));for(v in y)if(y[v])y[y[v].match(/([a-zA-Z]{0,10})/)[0].replace("3d","")]=y[v].match(/[^()\s]+(?=,|\))/g)[0].replace(new RegExp("deg","g"),"").replace(new RegExp("px","g"),"").split(",")||[0,0,0];e(n).animate({fake7:y.scale[0],fake4:y.rotate[0]},0);e(n).animate({fake1:i.x,fake2:i.y,fake3:i.z,fake4:i.rotate,fake5:i.skewX,fake6:i.skewY,fake7:i.scale},{step:function(e,t){g=t.prop.replace("fake","");g==1&&(s=t.now)||g==2&&(o=t.now)||g==3&&(u=t.now);g<4&&(h="translate"+(i.z>0?"3d":"")+"("+s+"px,"+o+"px"+(i.z>0?","+u+"px)":")"));g==4&&(a=t.now)&&(y.rotate[0]<=i.rotate&&a>y.rotate[0]||y.rotate[0]>i.rotate&&a<=y.rotate[0])&&(p="rotate("+a+"deg)");g==5&&(f=t.now)||g==6&&(l=t.now);g==(5||6)&&(d="skew("+f+"deg,"+l+"deg)");g==7&&(c=t.now)&&(y.scale[0]<=i.scale&&c>y.scale[0]||y.scale[0]>i.scale&&c<=y.scale[0])&&(m="scale("+c+")");n.css(r+"transform",(h||"")+(p||"rotate("+y.rotate[0]+"deg)")+(d||"")+(m||"scale("+y.scale[0]+")"))},duration:parseInt(i.duration),complete:function(){i.callback.call(this)}})})};e.fn.animateTransform.defaultSettings={x:0,y:0,z:0,skewX:0,skewY:0,scale:1,rotate:0,duration:1e4,callback:function(){}}})(jQuery)